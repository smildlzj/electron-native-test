# http://www.appveyor.com/docs/appveyor-yml
# mostly copied from nan appveyor.yml
os: Visual Studio 2017

environment:
  matrix:
    - electron_version: 1.8.4
      lib: node-libcurl
    - electron_version: 4.0.1
      lib: node-libcurl

platform:
  - x86

# git clone depth
clone_depth: 5

# Install scripts. (runs after repo cloning)
install:
  - ps: Install-Product node 8.10.0
  - npm install -g node-pre-gyp
  - npm install

build_script:
  - npm install %lib% --runtime=electron --target=%electron_version% --disturl=https://atom.io/download/atom-shell --save
  - cd node_modules/%lib%/ && node-pre-gyp package


artifacts:
- path: /node_modules/node-libcurl/build/stage/**/*.gz


